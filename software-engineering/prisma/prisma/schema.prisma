generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
  previewFeatures = ["nativeDistinct", "relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["auto"]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model AutoFile {
  id       Int    @id @default(autoincrement())
  data     Bytes
  filename String
  mimetype String?
  autoId   Int    @unique @map("auto_id")
  auto     auto   @relation(fields: [autoId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([autoId])
  @@map("auto_file")
  @@schema("auto")
}

model auto {
  id            Int       @id @default(autoincrement())
  version       Int       @default(0)
  fgnr          String    @unique
  art           autoart?
  preis         Decimal   @db.Decimal(10, 2)
  rabatt        Int       @db.SmallInt
  lieferbar     Boolean   @default(false)
  datum         DateTime? @db.Date
  schlagwoerter String[]
  erzeugt       DateTime  @default(now()) @db.Timestamp(6)
  aktualisiert  DateTime  @default(now()) @db.Timestamp(6)
  bild          bild[]
  modell        modell?
  autoFile      AutoFile?

  @@schema("auto")
}

model bild {
  id           Int    @id @default(autoincrement())
  beschriftung String
  content_type String
  auto_id      Int
  auto         auto   @relation(fields: [auto_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([auto_id])
  @@schema("auto")
}

model modell {
  id      Int    @id @default(autoincrement())
  modell  String
  auto_id Int    @unique
  auto    auto   @relation(fields: [auto_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("auto")
}

enum autoart {
  COUPE
  LIMO
  KOMBI

   @@map("autoart")
   @@schema("auto")
}
